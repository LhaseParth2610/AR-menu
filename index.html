<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AR Burger Menu</title>

  <!-- Google Model Viewer -->
  <script type="module"
    src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <style>
    /* Full-screen camera background */
    #camera-bg {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    /* Page layout */
    body {
      margin: 0;
      font-family: sans-serif;
      background: rgba(0,0,0,0.3);
      color: #fff;
    }
    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    /* Carousel styling */
    .carousel {
      flex: 1;
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
    }
    .slide {
      flex: 0 0 100%;
      scroll-snap-align: start;
      box-sizing: border-box;
      padding: 16px;
      text-align: center;
      background: rgba(0,0,0,0.5);
    }
    .slide h2 {
      margin: 8px 0;
      font-size: 1.4rem;
    }
    .slide p {
      margin: 8px 0;
      font-size: 1rem;
    }
    .slide model-viewer {
      width: 100%;
      height: 50vh;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
    }

    /* AR buttons */
    .ar-button {
      display: inline-block;
      margin: 12px 4px;
      padding: 10px 16px;
      font-size: 1rem;
      background-color: #FF7043;
      color: #fff;
      border: none;
      border-radius: 4px;
      text-decoration: none;
      cursor: pointer;
    }

    /* Footer with QR */
    footer {
      padding: 12px;
      text-align: center;
      background: rgba(0,0,0,0.7);
    }
    footer img {
      width: 80px;
      margin-top: 8px;
    }
    footer p {
      font-size: 0.9rem;
      margin: 4px 0;
    }
  </style>
</head>

<body>
  <!-- 1) camera feed as background -->
  <video id="camera-bg" autoplay playsinline muted></video>

  <div class="container">
    <!-- 2) carousel of two burgers -->
    <div class="carousel">
      <!-- Slide: Classic Cheeseburger -->
      <div class="slide">
        <h2>Classic Cheeseburger</h2>
        <model-viewer
          src="models/cheeseburger.glb"
          ios-src="models/cheeseburger.usdz"
          alt="3D Classic Cheeseburger"
          ar
          ar-modes="webxr scene-viewer quick-look"
          camera-controls
          interaction-prompt="auto"
          loading="lazy">
        </model-viewer>
        <p>Juicy beef patty with cheddar, lettuce, tomato & special sauce.</p>

        <!-- Android Scene Viewer Intent -->
        <a class="ar-button"
           href="intent://arvr.google.com/scene-viewer/1.0?file=https://ar-menu-git-master-parth-lhases-projects.vercel.app/models/cheeseburger.glb&mode=ar_preferred#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=https://ar-menu-git-master-parth-lhases-projects.vercel.app;end">
          View in AR (Android)
        </a>
        <!-- iOS Quick Look -->
        <a class="ar-button"
           rel="ar"
           href="https://ar-menu-git-master-parth-lhases-projects.vercel.app/models/cheeseburger.usdz">
          View in AR (iOS)
        </a>
      </div>

      <!-- Slide: Veggie Delight Burger -->
      <div class="slide">
        <h2>Veggie Delight Burger</h2>
        <model-viewer
          src="models/veggieburger.glb"
          ios-src="models/veggieburger.usdz"
          alt="3D Veggie Delight Burger"
          ar
          ar-modes="webxr scene-viewer quick-look"
          camera-controls
          interaction-prompt="auto"
          loading="lazy">
        </model-viewer>
        <p>Grilled veggie patty, avocado, spinach, & garlic aioli.</p>

        <!-- Android Scene Viewer Intent -->
        <a class="ar-button"
           href="intent://arvr.google.com/scene-viewer/1.0?file=https://ar-menu-git-master-parth-lhases-projects.vercel.app/models/veggieburger.glb&mode=ar_preferred#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=https://ar-menu-git-master-parth-lhases-projects.vercel.app;end">
          View in AR (Android)
        </a>
        <!-- iOS Quick Look -->
        <a class="ar-button"
           rel="ar"
           href="https://ar-menu-git-master-parth-lhases-projects.vercel.app/models/veggieburger.usdz">
          View in AR (iOS)
        </a>
      </div>
    </div>

    <!-- 3) Footer with instructions & QR -->
    <footer>
      <p>Swipe ← → to browse burgers. Tap “View in AR” to place.</p>
      <p>Scan again to return:</p>
      <img src="assets/qr-menu.png" alt="Scan to reopen AR menu">
    </footer>
  </div>

  <script>
    // Request rear camera on load
    async function startCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({
          video: { facingMode: { exact: "environment" } }
        });
        document.getElementById('camera-bg').srcObject = stream;
      } catch (e) {
        console.warn("Rear camera not accessible, using default.");
        const fallback = await navigator.mediaDevices.getUserMedia({ video: true });
        document.getElementById('camera-bg').srcObject = fallback;
      }
    }
    startCamera();
  </script>
</body>
</html>
